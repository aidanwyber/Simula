<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: lib/dialog.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: lib/dialog.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview Simple modal dialog helper used for alerts and prompts.
 */

/**
 * Wrapper around a HTML &lt;dialog> element providing alert and prompt helpers.
 * @class
 */
class Dialog {
	/**
	 * Create a new dialog wrapper and bind DOM elements.
	 */
	constructor() {
		this.dialog = document.querySelector('.dialog');
		this.dialogClose = document.querySelector('.dialog-close');
		this.dialogBackdropClose = document.querySelector(
			'.dialog-backdrop-close'
		);
		this.contentWrapper = this.dialog.querySelector(
			'.dialog-content-wrapper'
		);

		this.dialogClose.addEventListener('click', () => {
			this.close();
		});
		this.dialogBackdropClose.addEventListener('click', () => {
			this.close();
		});

		this.promptForm = this.dialog.querySelector('.dialog-prompt-form');
		this.promptInput = this.dialog.querySelector('.dialog-prompt-input');
		this.promptConfirmButton = this.dialog.querySelector(
			'.dialog-prompt-confirm'
		);
	}

	/**
	 * Show a message in the dialog.
	 * @param {string} html HTML content or plain text to display
	 */
	alert(html) {
		if (html !== '' &amp;&amp; html.indexOf('&lt;') === -1) {
			html = `&lt;p>${html}&lt;/p>`;
		}
		this.promptForm.style.display = 'none';
		this.contentWrapper.innerHTML = html;
		// close with Enter or Escape keys
		this.contentWrapper.onkeydown = e => {
			if (gui) gui.isTypingText = true;
			if (e.key === 'Enter' || e.key === 'Escape') {
				e.preventDefault();
				this.close();
			}
		};
		this.show();
	}

	/**
	 * Display a prompt dialog and resolve with the entered value.
	 *
	 * @param {string} html text or HTML to show
	 * @param {string} [defaultVal=''] pre-filled input value
	 * @param {string} [confirmButtonLabel='OK'] label for the confirm button
	 * @returns {Promise&lt;string>} resolves with the typed value
	 *
	 * @example
	 * // Using the dialog in a promise chain
	 * dialog.prompt('Enter your name:').then(name => console.log(name));
	 * @example
	 * // Using the dialog in an async function
	 * async function getUserName() {
	 *     let name = await dialog.prompt('Enter your name:');
	 *    console.log(`Hello, ${name}!`);
	 * }
	 */
	prompt(html, defaultVal = '', confirmButtonLabel = 'OK') {
		if (html !== '' &amp;&amp; html.indexOf('&lt;') === -1) {
			html = `&lt;p>${html}&lt;/p>`;
		}

		// reset contentWrapper on keydown from alert()
		this.contentWrapper.onkeydown = () => {};

		this.promptForm.style.display = '';
		html += this.contentWrapper.innerHTML = html;

		this.promptInput.value = defaultVal;
		this.promptConfirmButton.innerHTML = confirmButtonLabel;
		this.show();
		this.promptInput.focus();

		return new Promise(resolve => {
			// clicking button resolves the promise
			this.promptConfirmButton.onclick = () => {
				resolve(this.promptInput.value);
				this.close();
			};
			// Enter key resolves the promise
			this.promptInput.onkeydown = e => {
				if (gui) gui.isTypingText = true;
				if (e.key === 'Enter') {
					e.preventDefault();
					print(this.promptInput.value);
					resolve(this.promptInput.value);
					this.close();
				}
			};
		});
	}

	/**
	 * Open the underlying &lt;dialog> element.
	 */
	show() {
		this.dialog.showModal();
	}

	/**
	 * Close the dialog.
	 */
	close() {
		this.dialog.close();
	}
}

/**
 * Global instance used throughout the application.
 * @global
 * @type {Dialog}
 * @see Dialog
 */
const dialog = new Dialog();
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Button.html">Button</a></li><li><a href="ChangeSet.html">ChangeSet</a></li><li><a href="ColourBoxes.html">ColourBoxes</a></li><li><a href="ColourTextArea.html">ColourTextArea</a></li><li><a href="Controller.html">Controller</a></li><li><a href="Dialog.html">Dialog</a></li><li><a href="DieIcon.html">DieIcon</a></li><li><a href="Divider.html">Divider</a></li><li><a href="DualRangeInput.html">DualRangeInput</a></li><li><a href="Field.html">Field</a></li><li><a href="FileLoader.html">FileLoader</a></li><li><a href="GUIForP5.html">GUIForP5</a></li><li><a href="GUIImage.html">GUIImage</a></li><li><a href="Generator.html">Generator</a></li><li><a href="ImageLoader.html">ImageLoader</a></li><li><a href="JSONFileLoader.html">JSONFileLoader</a></li><li><a href="Label.html">Label</a></li><li><a href="Lang.html">Lang</a></li><li><a href="MultiColourBoxes.html">MultiColourBoxes</a></li><li><a href="Randomizer.html">Randomizer</a></li><li><a href="RangeSlider.html">RangeSlider</a></li><li><a href="RendererSVG.html">RendererSVG</a></li><li><a href="ResolutionSelect.html">ResolutionSelect</a></li><li><a href="ResolutionTextboxes.html">ResolutionTextboxes</a></li><li><a href="Select.html">Select</a></li><li><a href="Slider.html">Slider</a></li><li><a href="TextFileLoader.html">TextFileLoader</a></li><li><a href="Textarea.html">Textarea</a></li><li><a href="Textbox.html">Textbox</a></li><li><a href="Textfield.html">Textfield</a></li><li><a href="Title.html">Title</a></li><li><a href="Toggle.html">Toggle</a></li><li><a href="ValuedController.html">ValuedController</a></li><li><a href="XYSlider.html">XYSlider</a></li></ul><h3>Global</h3><ul><li><a href="global.html#availableLangKeys">availableLangKeys</a></li><li><a href="global.html#createGUI">createGUI</a></li><li><a href="global.html#dialog">dialog</a></li><li><a href="global.html#dictionary">dictionary</a></li><li><a href="global.html#getAPaperResolutionOptionAtDpi">getAPaperResolutionOptionAtDpi</a></li><li><a href="global.html#lang">lang</a></li><li><a href="global.html#language">language</a></li><li><a href="global.html#parent">parent</a></li><li><a href="global.html#resolutionOptions">resolutionOptions</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Jul 17 2025 10:49:07 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
