<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: scripts/create-gui.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: scripts/create-gui.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview Constructs the graphical user interface for the generator.
 *
 * All controls are created here using the controller classes from
 * {@link ../lib/gui.js} and {@link ../lib/controllers.js}.
 *
 * @see createGUI
 */

/**
 * Initialise or rebuild the global {@link GUIForP5} instance.
 * @see GUIForP5
 */
function createGUI() {
	if (gui != undefined) gui.div.remove();
	gui = new GUIForP5();

	gui.setLeft();

	// add logo up top (uses 'assets/generator-logo.svg', see style.css)
	let logo = gui.addField(new Field(gui.div, 'logo', ''));

	// ------------------------------ FORMAT ------------------------------
	gui.addTitle(2, 'LANG_FORMAT', false);
	gui.addController(
		new ResolutionSelect(
			gui,
			'Presets:',
			resolutionOptions,
			0,
			(controller, value) => {
				const resBox = gui.getController('resolutionTextboxes');
				if (resBox) resBox.setValueOnlyDisplay(pw, ph);
				generator.setup();
			}
		)
	);
	gui.addController(
		new ResolutionTextboxes(
			gui,
			pw,
			ph,
			(controller, value) => {
				if (
					value.w * value.h &lt; sq(10000) &amp;&amp;
					(value.w != pw || value.h != ph)
				) {
					generator.setup();
				}
			},
			controller => {
				controller.setValueOnlyDisplay(pw, ph);
			}
		)
	);

	// ------------------------------ APPEARANCE ------------------------------
	gui.addDivider();
	gui.addTitle(2, 'LANG_APPEARANCE', false);

	gui.addController(
		new ColourBoxes(
			gui,
			'colourBoxesFgCol',
			'LANG_FGCOL',
			generator.palette,
			0,
			(controller, value) => {
				generator.col = value;
			}
		),
		(doAddToRandomizerAs = true)
	);

	gui.addController(
		new Button(
			gui,
			'buttonRandomize',
			'LANG_RANDOMIZE',
			controller => {
				gui.randomizer.randomize();
				// generator.setup();
			},
			controller => {
				// controller.click(); // randomize on startup
			}
		)
	);

	// ------------------------------ EXPORT ------------------------------
	gui.addDivider();
	gui.addTitle(2, 'LANG_EXPORT', false);

	gui.addTitle(3, 'LANG_IMAGE', false);

	gui.addController(
		new Button(
			gui,
			'buttonCopyPNG',
			'LANG_COPY_TO_CLIPBOARD',
			controller => {
				copyCanvasToClipboard();
			},
			controller => {
				controller._doUpdateChangeSet = false;
			}
		)
	);

	gui.addController(
		new Button(
			gui,
			'buttonDownloadPNG',
			'Download PNG',
			controller => {
				save(Generator.getOutputFileName() + '.png');
			},
			controller => {
				controller._doUpdateChangeSet = false;
			}
		)
	);

	// gui.addController(new Button(
	//   gui, 'buttonDownloadSVG', 'Download SVG',
	//   (controller) => {
	//     generator.draw(doSVGToo=true);
	//     svgCanvas.save(Generator.getOutputFileName() + '.svg');
	//   }
	// ));

	gui.addDivider();

	gui.addTitle(3, 'LANG_VIDEO', false);

	gui.addController(
		new Slider(
			gui,
			'sliderSpeed',
			'LANG_SPEED',
			0.25,
			2.5,
			speed,
			0.25,
			(controller, value) => {
				speed = value; //pow(2, value * 2);
				controller.label.div.html(
					lang.process(`LANG_SPEED: ${speed} x`, true)
				);
			}
		),
		(doAddToRandomizerAs = false)
	);

	gui.addController(
		new Slider(
			gui,
			'sliderVidDuration',
			'LANG_VID_DURATION',
			1,
			30,
			round(duration),
			1,
			(controller, value) => {
				setDuration(value);
				controller.label.div.html(
					lang.process(`LANG_VID_DURATION: ${value} s`, true)
				);
			}
		),
		(doAddToRandomizerAs = false)
	);

	// ffmpeg.js var
	guiCaptureButtonMP4 = gui.addController(
		new Button(
			gui,
			'buttonVidCaptureMP4',
			lang.process('Start LANG_VID_CAPTURE MP4'),
			controller => {
				guiCaptureButtonChoice = guiCaptureButtonMP4;
				ffmpegExportSettings = MP4;
				if (!isCapturingFrames) {
					startCapture();
					controller.controllerElement.html(
						lang.process('Stop LANG_VID_CAPTURE')
					);
				} else {
					stopCapture();
					controller.controllerElement.html(
						lang.process('Start LANG_VID_CAPTURE')
					);
					clearFramesDir();
					isPlaying = true;
				}
			},
			controller => {
				controller._doUpdateChangeSet = false;
			}
		)
	);

	// ffmpeg.js var
	guiCaptureButtonMP4WEBM = gui.addController(
		new Button(
			gui,
			'buttonVidCaptureWEBM',
			lang.process('Start LANG_VID_CAPTURE (transparent WEBM)'),
			controller => {
				guiCaptureButtonChoice = guiCaptureButtonWEBM;
				ffmpegExportSettings = WEBM_TRANSPARENT;
				print(ffmpegExportSettings);
				if (!isCapturingFrames) {
					startCapture();
					controller.controllerElement.html(
						lang.process('Stop LANG_VID_CAPTURE (transparent WEBM)')
					);
				} else {
					stopCapture();
					controller.controllerElement.html(
						lang.process(
							'Start LANG_VID_CAPTURE (transparent WEBM)'
						)
					);
					clearFramesDir();
					isPlaying = true;
				}
			},
			controller => {
				controller._doUpdateChangeSet = false;
			}
		)
	);

	// ffmpeg.js var
	guiVideoLoadingDiv = gui.addField(
		new Field(gui.div, 'vidLoad', '', 'Video verwerken...')
	);
	guiVideoLoadingDiv.div.hide();
	let loaderDiv = createDiv();
	loaderDiv.parent(guiVideoLoadingDiv.div);

	// ------------------------------ SETTINGS ------------------------------
	gui.addDivider();
	gui.addTitle(2, 'LANG_SETTINGS', false);

	gui.addController(
		new Button(
			gui,
			'buttonUndo',
			'LANG_UNDO',
			controller => {
				changeSet.undo();
			},
			controller => {
				controller._doUpdateChangeSet = false;
				controller.controllerElement.elt.title = 'CTRL/CMD + Z';
			}
		)
	);

	gui.addController(
		new Button(
			gui,
			'buttonRedo',
			'LANG_REDO',
			controller => {
				changeSet.redo();
			},
			controller => {
				controller._doUpdateChangeSet = false;
				controller.controllerElement.elt.title = 'CTRL/CMD + SHIFT + Z';
			}
		)
	);

	gui.addDivider();

	gui.addController(
		new Button(
			gui,
			'buttonSaveSettings',
			'LANG_SAVE_SETTINGS',
			controller => {
				const fileName = prompt(
					lang.process('LANG_CHOOSE_FILE_NAME_MSG', true)
				);
				changeSet.download(fileName);
			},
			controller => {
				controller._doUpdateChangeSet = false;
			}
		)
	);

	gui.addController(
		new JSONFileLoader(
			gui,
			'jsonFileLoaderSettings',
			'LANG_LOAD_SETTINGS',
			(controller, file) => {
				print(controller, file);
				controller.setConsole(controller.fileName, '');
				changeSet.loadFromJSON(JSON.stringify(file.data));
			},
			controller => {
				controller.controllerElement.elt.accept += ',.settings';
			},
			controller => {
				controller._doUpdateChangeSet = false;
			}
		)
	);

	gui.addDivider();

	gui.createDarkModeButton();

	// ------------------------------ SUPPORT ------------------------------
	gui.addDivider();
	gui.addTitle(3, 'LANG_SUPPORT', false);

	gui.addController(
		new Button(gui, 'buttonHelpMe', 'LANG_HELP', controller => {
			helpMe();
		})
	);

	if (Generator.supportEmail?.indexOf('@') > -1) {
		let contactField = gui.addHTMLToNewField(
			lang.process(
				`&lt;a href="mailto:${Generator.supportEmail}` +
					`?subject=${Generator.name} generator` +
					`">LANG_CONTACT_MSG&lt;/a>`
			)
		);
		contactField.div.id('contact');
		contactField.div.parent(gui.div);
	}

	gui.addP5CatalystLogo();

	// initialize randomly
	// gui.randomizer.randomize();

	gui.setup();
}

/**
 * Preset resolutions displayed in the resolution drop-down menu.
 * @type {string[]}
 */
const resolutionOptions = [
	'Full-HD (1080p) LANG_PORTRAIT: 1080 x 1920',
	'Full-HD (1080p) LANG_LANDSCAPE: 1920 x 1080',
	'4K-Ultra-HD (2160p): 3840 x 2160',

	'Instagram post LANG_PORTRAIT: 1080 x 1350',
	'(Instagram post LANG_SQUARE): 1080 x 1080',
	'Instagram story: 1080 x 1920',

	'Facebook post LANG_LANDSCAPE: 1200 x 630',
	'Facebook post LANG_PORTRAIT: 630 x 1200',
	'Facebook post LANG_SQUARE: 1200 x 1200',
	'Facebook story: 1080 x 1920',
	'Facebook cover photo: 851 x 315',

	'X post LANG_LANDSCAPE: 1600 x 900',
	'X post LANG_PORTRAIT: 1080 x 1350',
	'X post LANG_SQUARE: 1080 x 1080',
	'X cover photo: 1500 x 500',

	'Linkedin LANG_PROFILEPIC: 400 x 400',
	'Linkedin cover photo: 1584 x 396',
	'Linkedin image post: 1200 x 628',

	'Mastodon post LANG_LANDSCAPE: 1280 x 720',
	'Mastodon post LANG_SQUARE: 1200 x 1200',

	'BlueSky post LANG_LANDSCAPE: 1200 x 675',
	'BlueSky post LANG_SQUARE: 1200 x 1200',
	'BlueSky header: 1500 x 500',

	'YouTube LANG_PROFILEPIC: 800 x 800',
	'YouTube banner: 2048 x 1152',
	'YouTube thumbnail: 1280 x 720',
	'YouTube shorts/stories: 1080 x 1920',

	'TikTok LANG_PORTRAIT: 1080 x 1920',
	'TikTok LANG_SQUARE: 1080 x 1080',

	'PowerPoint: 1920 x 1080',

	getAPaperResolutionOptionAtDpi(5, 300),
	getAPaperResolutionOptionAtDpi(4, 300),
	getAPaperResolutionOptionAtDpi(3, 300),
	getAPaperResolutionOptionAtDpi(2, 300),
	getAPaperResolutionOptionAtDpi(1, 300),
	getAPaperResolutionOptionAtDpi(0, 300),
	getAPaperResolutionOptionAtDpi(5, 300, false),
	getAPaperResolutionOptionAtDpi(4, 300, false),
	getAPaperResolutionOptionAtDpi(3, 300, false),
	getAPaperResolutionOptionAtDpi(2, 300, false),
	getAPaperResolutionOptionAtDpi(1, 300, false),
	getAPaperResolutionOptionAtDpi(0, 300, false),
];

/**
 * Utility that generates A-series paper size strings at a given DPI.
 * @param {number} aNumber paper size number (0 = A0, 1 = A1, ...)
 * @param {number} dpi dots per inch
 * @param {boolean} [isPortrait=true] orientation flag
 * @returns {string}
 */
function getAPaperResolutionOptionAtDpi(aNumber, dpi, isPortrait = true) {
	// A0 paper size in mm
	const baseWidth = 841;
	const baseHeight = 1189;
	const factor = Math.pow(2, aNumber / 2);
	const wMm = Math.floor(baseWidth / factor);
	const hMm = Math.floor(baseHeight / factor);
	const wPx = Math.round((wMm / 25.4) * dpi);
	const hPx = Math.round((hMm / 25.4) * dpi);
	return (
		`A${aNumber} ${
			isPortrait ? 'LANG_PORTRAIT' : 'LANG_LANDSCAPE'
		} @ ${dpi} DPI: ` +
		`${isPortrait ? wPx : hPx} x ${isPortrait ? hPx : wPx}`
	);
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Button.html">Button</a></li><li><a href="ChangeSet.html">ChangeSet</a></li><li><a href="ColourBoxes.html">ColourBoxes</a></li><li><a href="ColourTextArea.html">ColourTextArea</a></li><li><a href="Controller.html">Controller</a></li><li><a href="Dialog.html">Dialog</a></li><li><a href="DieIcon.html">DieIcon</a></li><li><a href="Divider.html">Divider</a></li><li><a href="Field.html">Field</a></li><li><a href="FileLoader.html">FileLoader</a></li><li><a href="GUIForP5.html">GUIForP5</a></li><li><a href="GUIImage.html">GUIImage</a></li><li><a href="Generator.html">Generator</a></li><li><a href="ImageLoader.html">ImageLoader</a></li><li><a href="JSONFileLoader.html">JSONFileLoader</a></li><li><a href="Label.html">Label</a></li><li><a href="Lang.html">Lang</a></li><li><a href="MultiColourBoxes.html">MultiColourBoxes</a></li><li><a href="Randomizer.html">Randomizer</a></li><li><a href="RangeSlider.html">RangeSlider</a></li><li><a href="ResolutionSelect.html">ResolutionSelect</a></li><li><a href="ResolutionTextboxes.html">ResolutionTextboxes</a></li><li><a href="Select.html">Select</a></li><li><a href="Slider.html">Slider</a></li><li><a href="TextFileLoader.html">TextFileLoader</a></li><li><a href="Textarea.html">Textarea</a></li><li><a href="Textbox.html">Textbox</a></li><li><a href="Textfield.html">Textfield</a></li><li><a href="Title.html">Title</a></li><li><a href="Toggle.html">Toggle</a></li><li><a href="ValuedController.html">ValuedController</a></li><li><a href="XYSlider.html">XYSlider</a></li></ul><h3>Global</h3><ul><li><a href="global.html#E">E</a></li><li><a href="global.html#FR">FR</a></li><li><a href="global.html#K">K</a></li><li><a href="global.html#MP4">MP4</a></li><li><a href="global.html#PHI">PHI</a></li><li><a href="global.html#SSID">SSID</a></li><li><a href="global.html#WEBM_TRANSPARENT">WEBM_TRANSPARENT</a></li><li><a href="global.html#availableLangKeys">availableLangKeys</a></li><li><a href="global.html#b64Digits">b64Digits</a></li><li><a href="global.html#bezierFilletControlPoints">bezierFilletControlPoints</a></li><li><a href="global.html#bodyFont">bodyFont</a></li><li><a href="global.html#canvScale">canvScale</a></li><li><a href="global.html#canvWrapper">canvWrapper</a></li><li><a href="global.html#canvas">canvas</a></li><li><a href="global.html#capitalizeFirstLetter">capitalizeFirstLetter</a></li><li><a href="global.html#changeSet">changeSet</a></li><li><a href="global.html#clearFramesDir">clearFramesDir</a></li><li><a href="global.html#colorToHexString">colorToHexString</a></li><li><a href="global.html#computeRoughSizeOfObject">computeRoughSizeOfObject</a></li><li><a href="global.html#constrainAngle">constrainAngle</a></li><li><a href="global.html#containCanvasInWrapper">containCanvasInWrapper</a></li><li><a href="global.html#convertDataURIToBinary">convertDataURIToBinary</a></li><li><a href="global.html#copyCanvasToClipboard">copyCanvasToClipboard</a></li><li><a href="global.html#createCanvasWrapper">createCanvasWrapper</a></li><li><a href="global.html#createGUI">createGUI</a></li><li><a href="global.html#dialog">dialog</a></li><li><a href="global.html#dictionary">dictionary</a></li><li><a href="global.html#doCaptureStartFromFrame0">doCaptureStartFromFrame0</a></li><li><a href="global.html#doRunRealTime">doRunRealTime</a></li><li><a href="global.html#draw">draw</a></li><li><a href="global.html#dtime">dtime</a></li><li><a href="global.html#duration">duration</a></li><li><a href="global.html#ffmpegCreateMP4">ffmpegCreateMP4</a></li><li><a href="global.html#ffmpegInit">ffmpegInit</a></li><li><a href="global.html#ffmpegSaveFrame">ffmpegSaveFrame</a></li><li><a href="global.html#ffmpegSetup">ffmpegSetup</a></li><li><a href="global.html#ffmpegUtilInit">ffmpegUtilInit</a></li><li><a href="global.html#ffmpegWaiter">ffmpegWaiter</a></li><li><a href="global.html#fromB64">fromB64</a></li><li><a href="global.html#gaussian">gaussian</a></li><li><a href="global.html#gaussianAngular">gaussianAngular</a></li><li><a href="global.html#gaussianSharp">gaussianSharp</a></li><li><a href="global.html#gaussianWobble">gaussianWobble</a></li><li><a href="global.html#generateSSID">generateSSID</a></li><li><a href="global.html#generator">generator</a></li><li><a href="global.html#getAPaperResolutionOptionAtDpi">getAPaperResolutionOptionAtDpi</a></li><li><a href="global.html#getFrameFileNames">getFrameFileNames</a></li><li><a href="global.html#getTimestamp">getTimestamp</a></li><li><a href="global.html#getUNIX">getUNIX</a></li><li><a href="global.html#getWheelDistance">getWheelDistance</a></li><li><a href="global.html#gui">gui</a></li><li><a href="global.html#handleFrameCapture">handleFrameCapture</a></li><li><a href="global.html#hashThreeIntegers">hashThreeIntegers</a></li><li><a href="global.html#helpMe">helpMe</a></li><li><a href="global.html#imageCentered">imageCentered</a></li><li><a href="global.html#inPg">inPg</a></li><li><a href="global.html#initUtils">initUtils</a></li><li><a href="global.html#intersectionPoint">intersectionPoint</a></li><li><a href="global.html#isArraysEqual">isArraysEqual</a></li><li><a href="global.html#isCapturingFrames">isCapturingFrames</a></li><li><a href="global.html#isInBounds">isInBounds</a></li><li><a href="global.html#isInCanvas">isInCanvas</a></li><li><a href="global.html#isMac">isMac</a></li><li><a href="global.html#isMouseInside">isMouseInside</a></li><li><a href="global.html#isPlaying">isPlaying</a></li><li><a href="global.html#isPointInTriangle">isPointInTriangle</a></li><li><a href="global.html#keyPressed">keyPressed</a></li><li><a href="global.html#lang">lang</a></li><li><a href="global.html#language">language</a></li><li><a href="global.html#lerpColorOKLab">lerpColorOKLab</a></li><li><a href="global.html#lum">lum</a></li><li><a href="global.html#maxImgResIncrease">maxImgResIncrease</a></li><li><a href="global.html#midPoint">midPoint</a></li><li><a href="global.html#mix">mix</a></li><li><a href="global.html#mouse">mouse</a></li><li><a href="global.html#mouseWheel">mouseWheel</a></li><li><a href="global.html#nFrames">nFrames</a></li><li><a href="global.html#nmc">nmc</a></li><li><a href="global.html#noiseOffs">noiseOffs</a></li><li><a href="global.html#numsToRoundedPercentages">numsToRoundedPercentages</a></li><li><a href="global.html#paramToIntSteps">paramToIntSteps</a></li><li><a href="global.html#ph">ph</a></li><li><a href="global.html#preload">preload</a></li><li><a href="global.html#progress">progress</a></li><li><a href="global.html#ptime">ptime</a></li><li><a href="global.html#pushpop">pushpop</a></li><li><a href="global.html#pw">pw</a></li><li><a href="global.html#randCol">randCol</a></li><li><a href="global.html#randomDate">randomDate</a></li><li><a href="global.html#randomGaussianBoxMueller2">randomGaussianBoxMueller2</a></li><li><a href="global.html#relScrollVel">relScrollVel</a></li><li><a href="global.html#resize">resize</a></li><li><a href="global.html#resolutionOptions">resolutionOptions</a></li><li><a href="global.html#restoreSerializedP5Color">restoreSerializedP5Color</a></li><li><a href="global.html#restoreSerializedVec2D">restoreSerializedVec2D</a></li><li><a href="global.html#restoreSerializedVec3D">restoreSerializedVec3D</a></li><li><a href="global.html#saveToLocalFFMPEG">saveToLocalFFMPEG</a></li><li><a href="global.html#scrollScale">scrollScale</a></li><li><a href="global.html#setDuration">setDuration</a></li><li><a href="global.html#setTime">setTime</a></li><li><a href="global.html#setup">setup</a></li><li><a href="global.html#sigmoid">sigmoid</a></li><li><a href="global.html#sign">sign</a></li><li><a href="global.html#signedAngleBetween">signedAngleBetween</a></li><li><a href="global.html#signedAngleDiff">signedAngleDiff</a></li><li><a href="global.html#simpleIntToFloatHash">simpleIntToFloatHash</a></li><li><a href="global.html#simplexNoise">simplexNoise</a></li><li><a href="global.html#simplifyAngle">simplifyAngle</a></li><li><a href="global.html#speed">speed</a></li><li><a href="global.html#startCapture">startCapture</a></li><li><a href="global.html#stopCapture">stopCapture</a></li><li><a href="global.html#stringToFloatHash">stringToFloatHash</a></li><li><a href="global.html#svgCanvas">svgCanvas</a></li><li><a href="global.html#tanh">tanh</a></li><li><a href="global.html#theShader">theShader</a></li><li><a href="global.html#theSvgCanvasSketch">theSvgCanvasSketch</a></li><li><a href="global.html#time">time</a></li><li><a href="global.html#titleFont">titleFont</a></li><li><a href="global.html#toB64">toB64</a></li><li><a href="global.html#toxiBezierVertex">toxiBezierVertex</a></li><li><a href="global.html#toxiFillet">toxiFillet</a></li><li><a href="global.html#toxiVertex">toxiVertex</a></li><li><a href="global.html#updateConversionProgress">updateConversionProgress</a></li><li><a href="global.html#utilBools">utilBools</a></li><li><a href="global.html#v">v</a></li><li><a href="global.html#vectorComponents">vectorComponents</a></li><li><a href="global.html#windowResized">windowResized</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Jul 17 2025 15:15:05 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
